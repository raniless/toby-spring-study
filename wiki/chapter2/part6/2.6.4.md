# 2.6.4 데이터 액세스 기술 트랜잭션의 통합
## 트랜잭션 매니저별 조합 가능 기술
### DataSourceTransactionManager
- JDBC와 iBatis 두가지 기술을 함께 사용할 수 있다.
- 트랜잭션을 통합하려면 항상 동일한 DataSource를 사용해야 한다는 점을 잊지 말자.
- DataSource로부터 Connection 정보를 가져와 같은 Datasource를 사용하는
  JDBC DAO와 iBatis DAO 작업에 트랜잭션 동기화 기능을 제공한다.

### JpaTransactionManager
- JPA API를 이용해 처리
- 기본적으로는 JPA 단독으로 트랜잭션을 관리
- 스프링에서는 JPA의 EntityManagerFactory가 스프링의 빈으로 등록된 DataSource를 사용할 수 있다.
- 이 DataSource를 JDBC DAO나 iBatis DAO에서도 사용할 수 있다.
- JpaTransactionManager는 직접적으로 DataSource를 의존하고 있지는 않지만
  EntityManagerFactory가 사용하는 DataSource를 이용해 트랜잭션을 동기화를 해준다.

### HibernateTransactionManager
- JpaTransactionManager와 동일한 방식을 이용해서 SessionFactory와 같은 DataSource를 공유하는 JDBC,iBatis DAO와 트랜잭션을 공유하게 해준다.
- JpaTransactionManager의 EntityManagerFactory 대신 SessionFactory을 대입하면 그 구조와 의존관계를 파악할 수 있을 것이다.

### JtaTransactionManager
- JTA는 모든 종류의 데이터 액세스 기술의 DAO가 같은 트랜잭션 안에 동작하게 만들 수 있다.
- JTA는 같은 DB에 대해 다른 기술을 사용할 때뿐 아니라 다른 DB를 사용하는 DAO도 하나의 트랜잭션으로 묶어줄 수 있다.
- 부가적인 준비 작업이 필요(JTA 서버환경 구성, 서버의 트랜잭션 매니저와 XA를 지원하는 특별한 DataSource 구성 등)
- 단지 하나의 DB를 사용하는 여러 기술의 트랜잭션을 통합하려고 한다면 JTA를 사용할 이유는 없다.
- 반면 하나 이상의 DB 또는 JMS와 같은 트랜잭션이 지원되는 서비스를 통합해서 하나의 트랜잭션으로 관리하려고 할 때는 JTA가 반드시 필요하다.

## ORM과 비 ORM DAO를 함께 사용할 때의 주의사항
- JPA/하이버네이트 같은 엔티티 기반의 ORM 기술과, JDBC/iBatis 같은 SQL 기반의 비 ORM 기술을 함께 사용하고 하나의 트랜잭션을 묶어서 사용하는 것은
  기술적으로 볼 때 아무런 문제가 없다. 하지만 각 기술의 특징을 잘 이해하지 않으면 예상치 못한 오류를 만날 수 있다.
- 