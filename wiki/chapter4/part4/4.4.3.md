# 4.4.3 form 태그 라이브러리
- 스프링의 form 태그 라이브러리를 이용하면 \<spring:bind>보다 훨씬 간결한 코드로 동일한 기능을 하는 코드를 만들 수 있다.
- 앞에서 만든 코드를 form 태그 라이브러리를 이용하면 다음과 같이 세 줄로 만들 수 있다.
  ```html
  <form:label path="name" cssErrorClass="errorMessage">Name</form:label>
  <form:input path="name" size="30" />
  <form:errors path="name" cssClass="errorMessage" />
  ```
- form 태그의 단점은 \<input>, \<label>, \<span>과 같은 HTML 코드를 직접 사용하지 못한다는 점이다.
- 하지만 각 HTML 스펙에 정의된 모든 표준 애트리뷰트를 지정할 수 있으니 form 태그에 익숙해지기만 하면 문제가 없다면 form 태그 라이브러리의 태그를 사용하는 것이 편리하다.
- form 태그를 사용하려면 JSP 파일 앞부분에 다음과 같이 태그 라이브러리를 선언해줘야 한다.
- form 태그는 spring 태그와 함께 사용할 수는 있지만, 비슷한 기능을 함께 사용하지 않도록 주의해야 한다.

## \<form:form>
- HTML \<form> 태그를 만들어준다. 또한 \<form:form> 태그 내부의 입력 필드에 적용할 모델의 이름을 지정할 수 있다.
- 이 때문에 \<form:input>의 path를 "user.name"이라고 하지 않고 "name" 이라고만 적을 수 있는 것이다.
- 애트리뷰트
  ### commandName, modelAttribute
  + 폼에 적용할 모델의 이름을 지정한다.
  + 스프링 MVC에서 말하는 커맨드는 모델 애트리뷰트와 같은 의미다.
  + user 모델에 대한 폼이라면 commandName="user" 또는 modelAttribute="user" 라고 정의한다. 디폴트 값은 command다.
  + 모델 이름이 command가 아니라면 직접 지정해줘야 한다. \<form> 태그의 id 값으로도 사용된다.

  ### method
  + HTML \<form> 태그의 method="post"에 들어가는 메소드 이름을 지정한다. 디폴트 값은 post다. 따라서 대개 method는 생략해도 좋다.
  + RESTful 스타일의 URL을 사용한다면 method는 put과 delete로 지정할 수도 있다.
  + HTML의 \<form> 태그는 get과 post 두 가지 메소드만 지원한다.
    따라서 이 경우 \<form> 태그의 메소드는 post로 설정되고 대신 다음과 같은 HTTP 메소드 정보가 담긴 히든 필드가 자동으로 추가된다.
    ```html
    <input type="hidden" name="_method" value="delete" />
    ```
  + 이 경우 서블릿 필터로 HiddenHttpMethodFilter를 설정해두면 _name 히든 필드를 확인해서 HTTP 요청 메소드 정보를 DELETE로 변경해준다.
  + 이를 이용해서 @RequestMapping(method=RequestMethod.DELETE)로 지정된 컨트롤러 메소드에 매핑할 수 있다.
  
  ### action
  + HTML \<form> 태그의 action 부분을 설정해서 URL을 지정할 수 있게 해준다. 일반적으로는 생략한다.
  + 폼을 띄우는 요청과 폼을 서브밋하는 요청의 URL을 동일하게 쓰고, HTTP 메소드만 GET과 POST로 구분하는 것이 간결하기 때문이다.
  + 예를 들면 URL을 /user/add로 동일하게 하고 GET인 경우엔 폼을 띄우고 POST인 경우엔 폼을 서브밋하는 요청으로 지정하는 것이다.
  + 따라서 폼의 action은 폼을 띄우는 URL과 동일하므로 지정하지 않아도 좋다. 물론 URL을 /user/addprocess처럼 다르게 하고 싶다면 직접 지정해도 좋다.
  + 이 외에도 HTML \<form> 태그에는 다양한 표준 애트리뷰트와 on으로 시작하는 다양한 이벤트를 지정할 수 있다.
  + 가장 일반적이고 단순하게 적용할 수 있는 \<form:form>은 다음과 같이 commandName만 지정한 것이다.
    ```html
    <form:form commandName="user"> ... </form:form>
    ```
  + 폼을 띄우는 요청의 URL이 /user/add였다면, 위의 태그에 의해 생성되는 HTML은 다음과 같다.
    ```html
    <form id="user" action="/user/add" method="post">
    ```

## \<form:input>
- HTML의 \<input type="text"> 태그를 생성한다. 필수 애트리뷰트는 path뿐이다.
- 그 외에 \<input> 태그에 적용 가능한 size, maxlength, readonly 같은 표준 HTML 애트리뷰트와 onClick, onKeyDown과 같은 이벤트 애트리뷰트 등을 지원한다.
- \<form:form>의 commandName에 해당하는 모델 오브젝트의 path 프로퍼티를 바인딩해준다.
- 애트리뷰트
  ### path
  + id를 따로 지정하지 않았다면 \<input> 태그의 id, name에 할당된다.
  + 또, value 애트리뷰트에 지정할 모델의 프로퍼티 이름으로 사용된다.
  + 이전 폼 서브밋에 오류가 있어서 폼이 다시 뜬 경우에는 모델에 바인딩 값 대신 직전에 잘못 입력한 값이 value에 들어간다.
  + 따라서 모델의 프로퍼티에서는 지원하지 않는 타입의 정보도 출력할 수 있다.

  ### cssClass, cssErrorClass
  + cssClass는 \<input> 태그의 class 애트리뷰트 값을 지정할 때 사용한다.
  + path에 해당하는 프로퍼티에 바인딩 오류가 있다면, cssClass 대신 cssErrorClass에 지정한 값이 CSS class로 지정된다.
  + 이를 이용해서 바인딩 오류 시 스타일을 다르게 만들 수 있다.
  + value 애트리뷰트에 출력되는 모델 오브젝트의 프로퍼티 값은 PropertyEditor나 ConversionService가 등록되어 있다면 이를 통해 문자열로 변환된다.
  + ConversionService로 적용되는 @NumberFormat이 적용된 point라는 프로퍼티가 있다고 하자.
    ```java
    @NumberFormat(pattern="###,##0")
    Integer point;
    ```
  + 모델 오브젝트의 point 프로퍼티에 1000이라는 값이 들어 있다면 \<form:input>에 의해 HTML이 만들어질 때는 다음과 같이 value 애트리뷰트가 생성될 것이다.
    ```html
    <input type="text" name="point" ... value="1,000" />
    ```
  + 이 값이 다시 서버에 전달될 때는 바인딩 중에 @NumberFormat을 담당하는 컨버터에 의해 다시 1000이라는 Integer 타입 오브젝트로 변환될 것이다.
  + 가장 기본적인 path만 지정된 다음 태그의 변환을 살펴보자.
    ```html
    <form:input path="name" />
    ```
  + 모델 오브젝트의 name 프로퍼티 값이 Spring이라면 다음과 같은 HTML이 만들어질 것이다.
    ```html
    <input type="text" id="name" name="name" value="Spring" />
    ```

## \<form:label>
## \<form:errors>
## \<form:hidden>
## \<form:checkbox>, \<form:checkboxes>
## \<form:radiobutton>, \<form:radiobuttons>
## \<form:select>, \<form:option>, \<form:options>
## 커스텀 UI 태그 만들기