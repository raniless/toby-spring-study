# 4.2.1 메소드 파라미터의 종류
## HttpServletRequest, HttpServletResponse
- 대개는 좀 더 상세한 정보를 담은 파라미터 타입을 활용하면 되기 때문에 필요 없겠지만,
  그래도 원한다면 서블릿의 HttpServletRequest, HttpServletResponse 오브젝트를 파라미터로 사용할 수 있다.
- ServletRequest, ServletResponse 타입도 가능하다.

## HttpSession
- HttpSession 오브젝트는 HttpServletRequest를 통해 가져올 수도 있지만, HTTP 세션만 필요한 경우라면
  HttpSession 타입 파라미터를 선언해서 직접 받는 편이 낫다.
- HttpSession은 서버에 따라서 멀티스레드 환경에서 안전성이 보장되지 않는다.
- 서버에 상관없이 HttpSession을 안전하게 사용하려면 핸들러 어댑터의 synchronizeOnSession 프로퍼티를 true로 설정해줘야 한다.

## WebRequest, NativeWebRequest
- WebRequest는 HttpServletRequest의 요청정보를 대부분 그대로 갖고 있는, 서블릿 API에 종속적이지 않은 오브젝트 타입이다.
- WebRequest는 원래 서블릿과 포틀릿 환경 양쪽에 모두 적용 가능한 범용적인 핸들러 인터셉터를 만들 때 활용하기 위해 만들어졌다.
- 따라서 스프링 서블릿/MVC의 컨트롤러에서라면 꼭 필요한 건 아니다.
- NativeWebRequest에는 WebRequest 내부에 감춰진 HttpServletRequest와 같은 환경종속적인 오브젝트를 가져올 수 있는 메소드가 추가되어 있다.

## Locale
- java.util.Locale 타입으로 DispatcherServlet의 지역정보 리졸버(LocaleResolver)가 결정한 Locale 오브젝트를 받을 수 있다.

## InputStream, Reader
- HttpServletRequest의 getInputStream()을 통해서 받을 수 있는 콘텐트 스트림 또는 Reader 타입 오브젝트를 제공받을 수 있다.

## OutputStream, Writer
- HttpServletResponse의 getOutputStream()을 가져올 수 있는 출력용 콘텐트 스트림 또는 Writer 타입 오브젝트를 제공받을 수 있다.

## @PathVariable
- @RequestMapping의 URL에 {}로 들어가는 패스 변수(path variable)를 받는다.
- 요청 파라미터를 URL의 쿼리 스트링으로 보내는 대신 URL 패스로 풀어서 쓰는 방식을 쓰는 경우 매우 유용하다.
- 예를 들어 id가 10인 사용자를 조회하는 페이지의 URL 쿼리 스트링으로 파라미터를 전달하면 보통 다음과 같이 작성하게 된다.
  ```
  /user/view?id=10
  ```
- 파라미터를 URL 경로에 포함시키는 방식으로 하면 다음과 같은 URL을 사용할 수 있다.
  URL의 특정 위치에 파라미터 값을 넣게 하면, 이해하기 쉽고 보기 좋은 URL을 만들 수 있다.
  ```
  /user/view/10
  ```
- 문제는 이렇게 일부가 달라질 수 있는 URL을 특정 컨트롤러에 매핑하는 방법과 URL 중에서 파라미터에 해당하는 값을 컨트롤러에서 참조하는 방법이다.
- @Controller는 URL에서 파라미터에 해당하는 부분에 {}을 넣는 URI 템플릿을 사용할 수 있다.
- 컨트롤러 메소드 파라미터에는 @PathVariable 애노테이션을 이용해 URI 템플릿 중에서 어떤 파라미터를 가져올지를 지정할 수 있다.
- 컨트롤러 메소든 다음과 같이 만들어주면 된다.
  ```java
  @RequestMapping("/user/view/{id}")
  public String view(@PathVariable("id") int id) {
    ...
  }
  ```
- URL의 {}에는 패스 변수를 넣는다. 이 이름을 @PathVariable 애노테이션의 값으로 넣어서 메소드 파라미터에 부여해주면 된다.
- /user/view/10이라는 URL이라면, id 파라미터에 10이라는 값이 들어올 것이다.
- 파라미터의 타입은 URL의 내용이 적절히 변환될 수 있는 것을 사용해야 한다.
- 위와 같이 int 타입을 썼을 경우에는 반드시 해당 패스 변수 자리에 숫자 값이 들어 있어야 한다.
- 패스 변수는 하나의 URI 템플릿 안에 여러 개를 선언할 수도 있다.
  ```java
  @RequestMapping("/member/{membercode}/order/{orderid}")
  public String lookup(@PathVariable("membercode") String code, @PathVariable("orderid") int orderid) {
    ...
  }
  ```
- 타입이 일치하지 않는 값이 들어오면 예외가 발생한다.
  별다른 예외처리를 해주지 않는다면 클라이언트에 HTTP 400 - Bad Request 응답 코드가 전달될 것이다.

## @RequestParam
- 단일 HTTP 요청 파라미터를 메소드 파라미터에 넣어주는 애노테이션이다.
- 가져올 요청 파라미터의 이름을 @RequestParam 애노테이션의 기본 값으로 지정해주면 된다.
- 요청 파라미터의 값은 메소드 파라미터의 타입에 따라 적절하게 변환된다.
- 다음 메소드 선언은 id 요청 파라미터를 int 타입으로 변환해서 메소드의 id 파라미터에 넣어준다.
  ```java
  public String view(@RequestParam("id") int id) { ... }
  ```
- @RequestParam은 다음과 같이 하나 이상의 파라미터에 적용할 수 있다.
  스프링의 내장 변환기가 다룰 수 있는 모든 타입을 지원한다.
  ```java
  public String view(@RequestParam("id") int id, @RequestParam("name") String name,
                     @RequestParam("file") MultipartFile file) { ... }
  ```
- @RequestParam에 파라미터 이름을 지정하지 않고 Map<String, String> 타입으로 선언하면 모든 요청 파라미터를 담은 맵으로 받을 수 있다.
  파라미터 이름은 맵의 키에, 파라미터 값은 맵의 값에 담겨 전달된다.
  ```java
  public String add(@RequestParam Map<String, String> params) { ... }
  ```
- @RequestParam을 사용했다면 해당 파라미터가 반드시 있어야만 한다. 없다면 HTTP 400 - Bad Request를 받게 될 것이다.
- 파라미터를 필수가 아니라 선택적으로 제공하게 하려면, required 엘리먼트를 false로 설정해주면 된다.
  요청 파라미터가 존재하지 않을 때 사용할 디폴트 값도 지정할 수 있다.
  ```java
  public void view(@RequestParam(value="id", required=false, defaultValue="-1") int id) { ... }
  ```
- 자바 코드를 컴파일할 때 디버깅 정보를 모두 삭제하는 수준의 최적화를 하지 않았다면 클래스 파일 안에 파라미터의 이름 정보가 남아 있다.
  메소드 파라미터의 이름과 요청 파라미터의 이름이 일치한다면 @RequestParam의 이름은 다음과 같이 생략할 수도 있다.
  이때는 메소드 파라미터와 이름이 같은 HTTP 요청 파라미터를 전달해준다.
  ```java
  public String view(@RequestParam int id) { ... }
  ```
- String, int와 같은 단순 타입인 경우는 @RequestParam을 아예 생략할 수도 있다.
- 이때는 메소드 파라미터와 같은 이름의 요청 파라미터 값을 받는다.
- 하지만 파라미터의 개수가 많고 종류가 다양하면 코드를 이해하는데 불편할 수도 있다.
- 단순한 메소드가 아니라면 명시적으로 @RequestParam을 부여해주는 것을 권장한다.

## CookieValue
## RequestHeader
## Map, Model. ModelMap
## @ModelAttribute
## Errors, BindingResult
## SessionStatus
## @RequestBody
## @Value
## @Valid