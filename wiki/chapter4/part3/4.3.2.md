# 4.3.2 Converter와 Formatter
- PropertyEditor와 달리 Converter는 변환 과정에서 메소드가 한 번만 호출된다.
- 즉 변환 작업 중에 상태를 인스턴스 변수로 저장하지 않는다는 뜻이다. 그래서 멀티스레드 환경에서 안전하게 공유해서 쓸 수 있다.
- 당연히 스프링의 싱글톤 빈으로 등록해두고 모든 변환 작업이 필요한 오브젝트에서 DI 받아 사용할 수 있다.

## Converter
- Converter 메소드는 소스 타입에서 타깃 타입으로의 단방향 변환만 지원한다.
- 물론 소스와 타깃을 바꿔서 컨버터를 하나 더 만들면 양방향 변환이 가능해진다.
- Converter는 소스와 타깃의 타입을 임의로 지정할 수 있다.
- PropertyEditor처럼 한쪽이 스트링 타입의 문자열로 고정되어 있지 않다. 따라서 범용적으로 사용할 수 있는 컨버터를 정의할 수 있다.
- Converter 인터페이스는 다음과 같이 정의되어 있다. 제네릭스를 이용해 소스 타입과 타깃 타입을 미리 지정해둘 수 있다.
  따라서 컨버터 API를 사용할 때 지저분한 타입 캐스팅 코드를 사용하지 않아도 된다.
  ```java
  @FunctionalInterface
  public interface Converter<S, T> {
    @Nullable
    T convert(S var1);
  }
  ```
- convert() 메소드는 매우 단순하다. 소스 타입의 오브젝트를 받아서 타깃 타입으로 변환해주면 된다.
- 다음은 LevelPropertyEditor에서 처럼 Level 이늄 오브젝트를 스트링 타입으로 변환하는 컨버터다.
  ```java
  public class LevelToStringConverter implements Converter<Level, String> {
    @Override
    public String convert(Level level) {
      return String.valueOf(level.intValue());
    }
  }
  ```
- 반대로 스트링 타입 오브젝트를 Level 오브젝트로 변환하는 컨버터도 다음과 같이 만들 수 있다.
  ```java
  public class StringToLevelConverter implements Converter<String, Level> {
    @Override
    public Level convert(String text) {
      return Level.valueOf(Integer.parseInt(text));
    }
  }
  ```
- 이 두 개의 컨버터를 함께 사용하면 LevelPropertyEditor와 동일한 기능을 하며, 멀티스레드 환경에서도 안전하게 사용할 수 있는 변경 기능을 제공할 수 있다.

## ConversionService
- 컨트롤러의 바인딩 작업에도 이렇게 만든 컨버터를 적용할 수 있을까? 물론 가능하다.
  하지만 PropertyEditor 처럼 Converter 타입의 컨버터를 개별적으로 추가하는 대신 ConversionService 타입의 오브젝트를 통해 WebDataBinder에 설정해줘야 한다.
- ConversionService는 여러 종류의 컨버터를 이용해서 하나 이상의 타입 변환 서비스를 제공해주는 오브젝트를 만들 때 사용하는 인터페이스다.
- 보통 ConversionService를 구현한 GenericConversionService는 스프링의 다양한 타입 변환 기능을 가진 오브젝트를
  등록 할 수 있는 ConverterRegistry 인터페이스도 구현하고 있다.
- 스프링 3.0에 추가된 새로운 타입 변환 오브젝트는 이미 살펴본 Converter 외에도 GenericConverter와 ConverterFactory를 이용해서도 만들 수 있다.
- GenericConverter를 이용하면 하나 이상의 소스-타깃 타입 변환을 한 번에 처리할 수 있는 컨버터를 만들 수 있다.
- 또 필드 컨텍스트를 제공받을 수 있다. 필드 컨텍스트는 모델의 프로퍼티에 대한 바인딩 작업을 할 때 제공받을 수 있는 메타정보를 말한다.
- 이 메타정보는 단순히 오브젝트의 타입뿐 아니라 클래스의 필드에 부여되어 있는 애노테이션, 제네릭스 타입 파라미터, 변환 대상인 메소드 파라미터 정보 등을 말한다.
- 따라서 GenericConverter를 이용하면 단순히 타입의 종류뿐 아니라 이런 부가적인 정보를 활용한 변환 로직을 작성할 수 있다.
- ConverterFactory는 제네릭스를 활용해서 특정 타입에 대한 컨버터 오브젝트를 만들어주는 팩토리를 구현할 때 사용한다.

## Formatter와 FormattingConversionService

## 바인딩 기술의 적용 우선순위와 활용 전략